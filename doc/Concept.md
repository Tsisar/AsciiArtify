# Порівняльний аналіз інструментів на базі Kubernetes, для розгортання та масштабування програмного продукту.

## Вступ
### Опис інструментів та їх призначення:
- Minikube — утиліта, яка дозволяє запускати Kubernetes кластер на локальній машині у вигляді віртуальної машини або через Docker.
- kind (Kubernetes IN Docker) — інструмент, який запускає кластер у вигляді Docker контейнерів. Призначений для тестування Kubernetes, особливо для розробників, що працюють із CI.
- k3d — обгортка для швидкого запуску легкого Kubernetes (k3s) усередині Docker контейнерів. Використовує дистрибутив Rancher k3s, який оптимізований для edge-середовищ і ARM-платформ.

## Характеристики
### Опис основних характеристик кожного інструменту:

| Характеристика               | Minikube                                               | kind (Kubernetes IN Docker)            | k3d (k3s in Docker)                  |
|------------------------------|--------------------------------------------------------|----------------------------------------|--------------------------------------|
| Підтримувані ОС              | Linux, macOS, Windows                                  | Linux, macOS, Windows                  | Linux, macOS, Windows                |
| Підтримка ARM (Raspberry Pi) | Часткова (через драйвери VirtualBox/Docker)            | Обмежена (Docker має підтримувати ARM) | **Добра** (k3s оптимізовано для ARM) |
| Потрібен Docker              | Ні (можна використовувати інші драйвери, напр. Podman) | Так                                    | Так                                  |
| Потрібен Podman              | Частково підтримується як драйвер (експериментально)   | Ні                                     | Ні                                   |
| Автоматизація (CI/CD)        | Можлива, але важче автоматизується                     | Добра                                  | Добра                                |
| Швидкість запуску            | Помірна (залежить від драйвера, часто повільна)        | **Висока**                             | **Висока**                           |
| Споживання ресурсів          | Високе (особливо з віртуалізацією)                     | Середнє                                | **Низьке** (k3s легкий)              |
| Вбудовані функції            | Dashboard, Metrics, Addons                             | Мінімальні                             | Мінімальні                           |
| Простота використання        | Висока, GUI-панель, зручна CLI                         | Середня                                | Середня                              |
| Документація                 | **Дуже добра**                                         | **Добра**                              | **Добра**                            |
| Підтримка Helm               | Так                                                    | Так                                    | Так                                  |
| Підтримка Ingress            | Так (через addons)                                     | Потрібно налаштовувати                 | Так (через k3s Traefik або інший)    |

## Переваги та недоліки

### Minikube:

**Переваги:**
- Проста установка та зручна CLI.
- Має вбудовані add-ons (Ingress, Dashboard, Metrics Server).
- Підтримує роботу без Docker (через Podman, VirtualBox тощо).
- Дуже хороша документація та активна спільнота.

**Недоліки:**
- Високе споживання ресурсів.
- Повільніше розгортання порівняно з kind і k3d.
- ARM-підтримка обмежена або складна в налаштуванні.
- Ускладнена автоматизація в CI/CD сценаріях.

---

### kind (Kubernetes IN Docker):

**Переваги:**
- Дуже швидке розгортання кластерів у Docker-контейнерах.
- Ідеально підходить для автоматизації (CI/CD pipelines).
- Проста конфігурація YAML-файлів для кастомізації кластеру.
- Не потребує віртуалізації — лише Docker.

**Недоліки:**
- Погано підтримує ARM-пристрої (на Raspberry Pi може бути нестабільним).
- Немає вбудованих add-ons (все налаштовується вручну).
- Менш зручний для початківців у порівнянні з minikube.

---

### k3d:

**Переваги:**
- Побудований на базі k3s — дуже легкий і швидкий Kubernetes-дистрибутив.
- Підтримка ARM (відмінно працює на Raspberry Pi).
- Добре підходить для edge-середовищ і локальної розробки.
- Легко інтегрується з DevOps-процесами.

**Недоліки:**
- Залежність від Docker (немає підтримки Podman).
- Менше документації та прикладів у порівнянні з minikube.
- Базується на k3s, який має деякі відмінності від "повноцінного" Kubernetes (наприклад, вбудований Traefik).

## Висновки

Після порівняння трьох основних інструментів для локального розгортання Kubernetes-кластерів — Minikube, kind та k3d — можна зробити наступні висновки:

- **Minikube** є добрим варіантом для початківців, завдяки простому інтерфейсу, GUI та великій кількості вбудованих можливостей. Проте він потребує більше ресурсів і є менш зручним для автоматизації та ARM-платформ.
- **kind** ідеально підходить для сценаріїв CI/CD, особливо у Linux/AMD64 середовищах. Проте ARM-підтримка є нестабільною або відсутньою, що робить його менш придатним для розгортання на Raspberry Pi.
- **k3d** забезпечує чудову продуктивність, легкість, підтримку ARM (включно з Raspberry Pi) і швидкий старт кластерів. Він базується на легковажному дистрибутиві **k3s**, що спрощує розгортання й оптимізує використання ресурсів.

### Рекомендація

**Рекомендується використовувати `k3d`** як основний інструмент для локального Kubernetes-середовища. Це забезпечить швидке та стабільне розгортання навіть на пристроях з обмеженими ресурсами (наприклад, Raspberry Pi), спростить автоматизацію та дозволить легко масштабувати систему у майбутньому.
> ⚙️ **Окрема рекомендація:**  
> Хоча `k3s` за замовчуванням використовує **Traefik** як Ingress Controller, **рекомендується встановити та використовувати `Ingress-NGINX`**. Це дозволить підготуватися до подальшого переходу на production-кластери, де Traefik зазвичай не використовується.

## Демонстрація
Розгорнемо http-echo сервер на `k3d` кластері та налаштуємо Ingress для доступу до нього.

```bash
kubectl apply -f https://raw.githubusercontent.com/Tsisar/AsciiArtify/refs/heads/master/http-echo/http-echo.yaml
```

Провіримо, відповідь сервера:
```bash
curl http://echo.tsisar.lan
```
Domo:
![Image](gif/demo.gif)